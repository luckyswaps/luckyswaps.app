"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[535],{535:(e,s,t)=>{t.r(s),t.d(s,{default:()=>C});var l=t(3696),n=t(9166),a=t(8523),i=t(5981),o=t(3393),r=t(2540);function c({swap:e}){const s=(0,i.NA)();return(0,r.jsxs)("div",{className:"flex flex-row carousel-center carousel-item items-center gap-2",children:[(0,r.jsx)(a.H8,{user:e.user}),(0,r.jsx)("div",{className:"text-[14px] font-BelanosimaSemiBold text-[#F0F7FA]",children:(0,a.qq)(e.user.name)}),(0,r.jsx)("img",{src:s.getTokenByMintAddress(e.mintAddress).logoURI,className:"w-8 h-8 rounded-full object-cover relative z-10",alt:"sell"}),(0,r.jsxs)("div",{className:"text-[14px] font-BelanosimaSemiBold text-[#5F7385]",children:[e.result," ",e.amountAsFloat," ",s.getTokenByMintAddress(e.mintAddress).symbol," on ",e.pair]})]})}function d(){const e=(0,n._)(),s=(0,o.y)();return(0,r.jsx)("div",{className:"carousel carousel-center h-14 overflow-hidden w-full px-5 lg:max-w-4xl mx-auto",children:e.tickerVisible&&(0,r.jsx)("div",{className:"carousel-inner flex animate-scroll w-full gap-10 justify-items-center",children:s.tickerItems.map(((e,s)=>(0,r.jsx)(c,{swap:e},s)))})})}var x=t(5768),m=t(3530),u=t(8267),p=t(9758),f=t(8358),h=t(7435),j=t(3694);function g({hideModal:e,show:s,onSelectCallback:t}){const n=(0,i.NA)(),o=(0,j.F7)(),[c,d]=(0,l.useState)(""),x=n.allTokens.filter((e=>e.name&&e.name.toLowerCase().includes(c.toLowerCase())||e.symbol&&e.symbol.toLowerCase().includes(c.toLowerCase()))),m=x.filter((e=>!!(o.tokens&&e.mintAddress in o.tokens&&+o.tokens[e.mintAddress].amountAsFloat>0))),u=x.filter((e=>!m.includes(e)));function h(s){t(s),d(""),e()}return(0,r.jsxs)(a.Vm,{title:"Select a token",hide:e,show:s,children:[(0,r.jsxs)("label",{className:"input input-bordered bg-[#16171A] flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",className:"grow",placeholder:"Search",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&1===x.length&&(e.stopPropagation(),setTimeout((()=>{h(x[0].mintAddress)}),1))}}),!!c&&(0,r.jsx)("span",{className:"badge cursor-pointer",onClick:()=>d(""),children:"x"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})})]}),(0,r.jsxs)("div",{className:"min-h-96",children:[0===u.length&&0===m.length&&(0,r.jsx)("span",{children:"No token found"}),m.length>0&&(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("th",{children:(0,r.jsx)("span",{className:"text-[#F0F7FA]",children:"Your Tokens"})})})}),(0,r.jsx)("tbody",{children:m.map((e=>{const s=n.getStatsByMintAddress(e.mintAddress);return(0,r.jsxs)("tr",{className:"hover:cursor-pointer hover:bg-[#20295D]",onClick:()=>{h(e.mintAddress)},children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"avatar",children:(0,r.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,r.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:e.name}),(0,r.jsxs)("div",{className:"text-sm opacity-50",children:[(0,r.jsx)(p.xv,{mintAddress:e.mintAddress})," ",(0,a.qq)(e.mintAddress)]})]})]})}),(0,r.jsx)("td",{children:s&&s.volumeInUSD&&(0,r.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,f.az)(s.volumeInUSD)})})]},e.symbol)}))})]}),u.length>0&&(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("th",{children:(0,r.jsx)("span",{className:"text-[#F0F7FA]",children:"All other Tokens"})})})}),(0,r.jsx)("tbody",{children:u.map((e=>{const s=n.getStatsByMintAddress(e.mintAddress);return(0,r.jsxs)("tr",{className:"hover:cursor-pointer hover:bg-[#20295D]",onClick:()=>{h(e.mintAddress)},children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"avatar",children:(0,r.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,r.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:e.name}),(0,r.jsxs)("div",{className:"text-sm opacity-50",children:[e.symbol," ",(0,a.qq)(e.mintAddress)]})]})]})}),(0,r.jsx)("td",{children:s&&s.volumeInUSD&&(0,r.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,f.az)(s.volumeInUSD)})})]},e.mintAddress)}))})]})]})]})}var v=t(7124);function b(e){const s=[{name:"Your odds",value:e.oddsAsFloat.toFixed(1),icon:(0,r.jsx)(v.Tw,{})},{name:"Your chance to win",value:e.probability,icon:(0,r.jsx)(v.R3,{})},{name:"You send",value:e.sendAmount+" "+e.sendSymbol,icon:(0,r.jsx)(v.qx,{})},{name:"Would be swapped to",value:e.swapOutputAmountAsFloat+" "+e.receiveSymbol,icon:(0,r.jsx)(v.vJ,{})},{name:"You can win",value:e.receiveAmountAsFloat+" "+e.receiveSymbol,icon:(0,r.jsx)(v.f,{})}],t=(0,n._)();return(0,r.jsxs)("div",{className:"flex flex-col gap-5 items-start -mt-6 z-10 w-full",children:[(0,r.jsx)("div",{onClick:()=>t.setSwapInfoVisible(!t.swapInfoVisible),className:"flex items-center ml-6 gap-2 custom-gradient p-px rounded-[40px] h-10 cursor-pointer select-none",children:(0,r.jsxs)("div",{className:"bg-[#232429] shadow-custom-inset flex items-center gap-2 rounded-[40px] px-4 h-full",children:[(0,r.jsx)("span",{className:"flex items-center justify-center "+(t.swapInfoVisible?"rotate-180":""),children:(0,r.jsx)(v.ZL,{})}),(0,r.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#607583]",children:"Info"})]})}),t.swapInfoVisible&&(0,r.jsx)("div",{className:"flex flex-col gap-2 w-full px-6",children:s&&s.map(((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon,(0,r.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:e.name})]}),(0,r.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:e.value})]},s)))})]})}var w=t(513),N=t(2358);function y({wallet:e,name:s,amountAsFloat:t,amountOnChange:l,token:n,onChangeToken:a,canWinAmountAsFloat:i=!1,waitingForNumbers:o=!1}){return(0,r.jsxs)("div",{className:"bg-[url('/assets/image/subtract.png')] w-full bg-no-repeat bg-cover h-[144px] flex flex-col items-start justify-between relative pt-[20px] pl-[24px]",children:[(0,r.jsx)("div",{className:"flex items-center absolute top-[4px] right-0 justify-center custom-gradient p-px rounded-full h-14",children:(0,r.jsx)("div",{role:"button",onClick:a,className:"bg-[#232429] hover:bg-[#20295D] shadow-custom-inset font-BelanosimaSemiBold flex items-center h-full rounded-full pl-4 pr-4 py-2 justify-center text-[#607583] font-semibold text-xs tracking-[0.02em]",children:(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"active:scale-[0.99] transition-all duration-100 flex gap-3 items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative w-10 h-10",children:[(0,r.jsx)("div",{className:"absolute inset-0 w-full h-full bg-green-300 blur-2xl z-0"}),(0,r.jsx)("img",{src:n.logoURI,className:"w-full h-full rounded-full object-cover relative z-10",alt:"sell"})]}),(0,r.jsx)("div",{className:"text-xs text-sm font-BelanosimaSemiBold text-[#F0F7FA]",children:n.symbol})]}),(0,r.jsx)(v.ZL,{})]})})})}),(0,r.jsxs)("div",{className:"text-[14px] flex flex-row font-BelanosimaSemiBold text-[#F0F7FA] w-full",children:[s," ",e.publicKey&&(0,r.jsxs)("div",{className:"w-[14rem] text-right text-[13px] font-BelanosimaRegular",children:["You have"," ",(0,r.jsx)(p.xv,{mintAddress:n.mintAddress,clickCallback:i?void 0:e=>l({target:{value:e.toString()}})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pr-6 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 pb-2",children:[o&&(0,r.jsx)("span",{className:"h-[72px] text-[64px] text-[#F0F7FA] loading loading-dots loading-lg"}),!o&&(0,r.jsx)("input",{type:"text",value:i||t,placeholder:"Enter Amount",disabled:!!i,contentEditable:!(i||!l),className:"focus:outline-none bg-transparent w-64 text-[64px] placeholder:text-[32px] leading-[72px] font-BelanosimaRegular text-[#F0F7FA]",onChange:l})]}),!!i&&(0,r.jsxs)("div",{className:"flex flex-col items-end justify-end",children:[(0,r.jsx)("span",{className:"text-sm font-BelanosimaSemiBold text-[#F0F7FA] font-semibold",children:"Swap Return"}),(0,r.jsx)("span",{className:"text-[28px] leading-8 font-BelanosimaSemiBold font-semibold text-[#F0F7FA]",children:(0,r.jsxs)("span",{className:"text-[#4791FF] pr-0.5",children:[t," "]})})]})]})]})}function A({oddsAsFloat:e,oddsOnChange:s}){return(0,r.jsxs)("div",{className:"slider-container",children:[(0,r.jsxs)("div",{className:"flex flex-col absolute -top-[17px] px-1 w-full",children:[(0,r.jsxs)("div",{className:"slider-labels",children:[(0,r.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x1"}),(0,r.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x2"}),(0,r.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x3"}),(0,r.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x4"}),(0,r.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x5"})]}),(0,r.jsx)("div",{className:"flex justify-between w-full",children:Array(5).fill("").map(((e,s)=>(0,r.jsx)("span",{className:"point"},s)))})]}),(0,r.jsxs)("div",{className:"slider-wrapper",children:[(0,r.jsx)("input",{type:"range",min:"1",max:"5",step:"0.1",value:e,className:"slider w-full h-3 bg-no-repeat",onChange:s}),(0,r.jsx)("div",{style:{width:25*(e-1)+"%"},className:"absolute bg-no-repeat bg-full slider-bg rounded-[40px] -top-[5px] h-8 w-full  left-0 overflow-hidden pointer-events-none"})]})]})}function F({oddsAsFloat:e,oddsOnChange:s}){return(0,r.jsx)("div",{className:"flex flex-col relative z-10 w-full",children:(0,r.jsx)("div",{className:"flex items-center justify-center custom-gradient p-px rounded-[40px] relative w-full h-[144px]",children:(0,r.jsxs)("div",{className:"bg-[#232429] shadow-custom-inset font-BelanosimaSemiBold flex flex-col justify-between w-full h-full rounded-[40px] pl-[24px] pr-[24px] ",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:"Odds"}),(0,r.jsx)("input",{value:e,onChange:s,className:"focus:outline-none bg-transparent w-24 font-normal text-right text-[64px] leading-[56px] tracking-[-0.02em] text-[#F0F7FA]"})]}),(0,r.jsx)("div",{className:"pb-2",children:(0,r.jsx)(A,{oddsAsFloat:e,oddsOnChange:s})})]})})})}function S(){return(0,r.jsx)("span",{className:"flex items-center justify-center cursor-pointer",children:(0,r.jsx)("img",{className:"w-8 h-8",alt:"share-icon",src:"/assets/image/share-icon.png"})})}function B({startPosition:e,swap:s}){const t=(0,w.c)(),l=((0,i.NA)(),(0,n._)()),a=-20,o=100,d="won"===s.result?"animate-swap-happy-jump":"animate-swap-sad-fall";return(0,r.jsx)("div",{className:"z-[50] fixed inset-0",children:(0,r.jsxs)("div",{className:`z-[50] rounded-full flex items-center justify-center absolute ${d}`,style:{top:`${e.top}px`,left:`${e.left}px`,"--end-x":`${a}px`,"--end-y":`${o}px`},children:[(0,r.jsx)(c,{swap:s}),(0,r.jsx)("div",{className:"hover:cursor-pointer pl-5",onClick:function(){l.setChatVisible(!0),t.onSendMessage({sender:s.user,payload:`swap: ${JSON.stringify(s)}`,created:(0,N.O5)()})},children:(0,r.jsx)(S,{})})]})})}function k({sendMint:e,receiveMint:s}){(0,a.RU)();const{connection:t}=(0,m.w)(),c=(0,u.v)(),d=(0,h.Zp)(),x=((0,a.hx)(),(0,i.NA)()),p=(0,o.y)(),j=(0,i.Hk)(),v=x.satoshiToFloat(e,1e8).toString(),[w,N]=(0,l.useState)(2),[A,S]=(0,l.useState)(100),[k,C]=(0,l.useState)(v),[M,T]=(0,l.useState)(""),[$,z]=(0,l.useState)(""),[q,I]=(0,l.useState)(e),[R,D]=(0,l.useState)(s),[O,P]=(0,l.useState)(!1),E=(0,l.useRef)(null),[U,V]=(0,l.useState)({state:"idle",swap:null}),L=(0,l.useRef)({top:0,left:0}),Y=(0,n._)(),Z=!x.isHouseToken(R),G=(0,l.useMemo)((()=>{if(K()){if(Z){const e=k?Number.parseFloat(k):null,s=H(e),t=s&&e?e-s:null;return null!=s&&null!=t?(t+s*w).toString():null}return k}return null}),[w,A,k,q]),W=(0,l.useMemo)((()=>K()?Z?(+$/w).toPrecision(5):$:null),[$]);function _(e){e===R&&D(q),I(e),d(e===R?`/swap/${R}/${q}`:`/swap/${e}/${R}`)}function H(e){return e?e*A/100:null}function K(){return(0,f.uA)(k)&&w&&q&&R}(0,l.useEffect)((()=>{K()&&P(!0)}),[w,A,k,q,R]),(0,a.sv)((()=>{K()&&async function(){const e=q,s=R;if(!G||!e||!s)return;const t=+G*Math.pow(10,x.getTokenByMintAddress(e).decimals),l=await(await fetch(`https://quote-api.jup.ag/v6/quote?inputMint=${e}&outputMint=${s}&amount=${t}&slippageBps=50`)).json(),n=x.calculatePrice(l),a=+G*n;if(z(a.toPrecision(5)),Z)T(a.toPrecision(5));else{const e=H(a),s=e&&a?a-e:null;if(null==e||null==s)throw Error("Something went wrong");T((s+e*w).toPrecision(5))}P(!1)}()}),[w,A,k,q,R]);const[J,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(!1),[se,te]=(0,l.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{show:J,hideModal:()=>Q(!1),onSelectCallback:e=>_(e)}),(0,r.jsx)(g,{show:X,hideModal:()=>ee(!1),onSelectCallback:e=>{return q===(s=e)&&I(R),D(s),void d(q===s?`/swap/${R}/${q}`:`/swap/${q}/${s}`);var s}}),(0,r.jsx)("div",{className:" p-px flex flex-col flex-1  rounded-[40px] min-w-[514px] w-[514px] max-w-[514px]",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full rounded-[40px] p-1 relative z-[12] bg-[url('/assets/image/second.png')] bg-cover bg-no-repeat bg-center  bg-[#1B1C1F]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 relative w-full",children:[(0,r.jsx)(y,{wallet:c,name:"Send Amount",amountAsFloat:k,amountOnChange:e=>C(e.target.value),token:x.getTokenByMintAddress(q),onChangeToken:()=>Q(!0)}),(0,r.jsx)("img",{alt:"swap-icon",src:"/assets/image/swap-icon.png",className:"w-10 h-10 object-cover flex items-center justify-center z-10 absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2"}),(0,r.jsx)("div",{onClick:()=>_(R),className:"cursor-pointer rounded-full w-10 h-10 object-cover flex items-center justify-center z-10 absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 hover:bg-[#20295D] hover:bg-opacity-50"}),(0,r.jsx)(y,{wallet:c,name:"You can win",amountAsFloat:W,amountOnChange:e=>T(e.target.value),token:x.getTokenByMintAddress(R),onChangeToken:()=>ee(!0),canWinAmountAsFloat:M,waitingForNumbers:O})]}),(0,r.jsx)(F,{oddsAsFloat:w,oddsOnChange:e=>N(Number.parseFloat(e.target.value))}),(0,r.jsx)(b,{oddsAsFloat:w,probability:(1/w*100*.975).toFixed(1),sendAmount:k,sendSymbol:x.getTokenByMintAddress(q).symbol,receiveSymbol:x.getTokenByMintAddress(R).symbol,gambleBeforeSwap:Z,swapInputAmountAsFloat:G,receiveAmountAsFloat:M,swapOutputAmountAsFloat:W}),!se&&(0,r.jsx)("div",{onClick:()=>{if(!E.current)return;const e=E.current.getBoundingClientRect();L.current={top:e.top,left:e.left},te(!0),async function(){const e=q,s=R,t=+k*Math.pow(10,x.getTokenByMintAddress(e).decimals);return await j.mutateAsync({inputMint:e,outputMint:s,amountAsInteger:t,oddsAsFloat:w})}().then((e=>{te(!1);const s={user:{name:c.publicKey.toString()},amountAsFloat:M,mintAddress:R,result:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"===R?"won":"lost",pair:x.getTokenByMintAddress(q).symbol+" / "+x.getTokenByMintAddress(R).symbol};Y.setTickerVisible(!1),V({state:"animating",swap:s}),setTimeout((()=>{V({state:"animating",swap:s}),setTimeout((()=>{V({state:"idle",swap:null}),Y.setTickerVisible(!0),p.onAddTickerItem(s)}),1e3)}),2300)}))},className:"flex items-center justify-center px-6 transition hover:duration-500 hover:scale-110 active:duration-100 active:scale-90 my-6 w-full",children:(0,r.jsx)("button",{ref:E,disabled:!K()||O,className:"bg-[url('/assets/image/swap-btn.png')] disabled:bg-none hover:bg-[#20295D55] transition duration-500 hover:bg-blend-overlay bg-no-repeat bg-center bg-cover z-10 w-full p-px h-16 flex items-center rounded-[40px] relative justify-center",children:(0,r.jsx)("span",{className:" flex items-center justify-center relative z-10 rounded-[40px] shadow-blur-inset text-base font-semibold font-BelanosimaSemiBold text-[#F0F7FA] w-full h-full",children:"Swap"})})}),se&&(0,r.jsx)("div",{className:"flex items-center justify-center px-6 my-6 w-full",children:(0,r.jsx)("div",{className:"z-10 w-full p-px h-16 flex items-center rounded-[40px] relative justify-center",children:(0,r.jsx)("span",{className:"animate-pulse flex text-gray-400 items-center justify-center relative z-10 rounded-[40px] shadow-blur-inset text-base font-semibold font-BelanosimaSemiBold w-full h-full",children:"Swapping in progress"})})}),("animating"===U.state||"completed"===U.state)&&(0,r.jsx)(B,{startPosition:L.current,swap:U.swap})]})})]})}function C(){const e=(0,h.g)(),s=(0,l.useMemo)((()=>e.sendMint?e.sendMint:"So11111111111111111111111111111111111111112"),[e]),t=(0,l.useMemo)((()=>e.receiveMint?e.receiveMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,r.jsx)("span",{className:"text-[#F0F7FA] font-BelanosimaRegular text-center font-normal text-[88px] leading-[96px] tracking-[-0.02em]",children:"Lucky\xa0Swaps"}),(0,r.jsx)("span",{className:"font-semibold text-base text-[#5F7385] text-center font-BelanosimaSemiBold",children:"Challenge your luck now"})]}),(0,r.jsxs)("div",{className:"flex flex-col px-5 md:px-12 my-14 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8 h-full w-full max-w-[960px] mx-auto items-center xl:items-start justify-center",children:[(0,r.jsx)(x.x,{}),(0,r.jsx)(k,{sendMint:s,receiveMint:t})]}),(0,r.jsx)(d,{})]})]})}}}]);