"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[535],{535:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var l=t(3696),n=t(9166),a=t(8523),i=t(5981),o=t(2540);function r({swap:e}){const s=(0,i.NA)();return(0,o.jsxs)("div",{className:"flex flex-row carousel-center carousel-item items-center gap-2",children:[(0,o.jsx)(a.H8,{user:e.user}),(0,o.jsx)("div",{className:"text-[14px] font-BelanosimaSemiBold text-[#F0F7FA]",children:(0,a.qq)(e.user.name)}),(0,o.jsx)("img",{src:s.getTokenByMintAddress(e.mintAddress).logoURI,className:"w-8 h-8 rounded-full object-cover relative z-10",alt:"sell"}),(0,o.jsxs)("div",{className:"text-[14px] font-BelanosimaSemiBold text-[#5F7385]",children:[e.result," ",e.amountAsFloat," ",s.getTokenByMintAddress(e.mintAddress).symbol," on ",e.pair]})]})}function c(){const e=(0,n._)();return(0,o.jsx)("div",{className:"carousel carousel-center h-14 overflow-hidden w-full px-5 lg:max-w-4xl mx-auto",children:e.tickerVisible&&(0,o.jsx)("div",{className:"carousel-inner flex animate-scroll gap-10",children:[{user:{name:"abc"},amountAsFloat:"2",mintAddress:"So11111111111111111111111111111111111111112",pair:"SOL / USDC",result:"won"},{user:{name:"def"},amountAsFloat:"3",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",pair:"SOL / USDC",result:"won"},{user:{name:"def"},amountAsFloat:"5",mintAddress:"So11111111111111111111111111111111111111112",pair:"SOL / USDC",result:"lost"}].map(((e,s)=>(0,o.jsx)(r,{swap:e},s)))})})}var d=t(5768),m=t(3530),x=t(8267),u=t(9758),p=t(8358),f=t(7435),h=t(3694);function j({hideModal:e,show:s,onSelectCallback:t}){const n=(0,i.NA)(),r=(0,h.F7)(),[c,d]=(0,l.useState)(""),m=n.allTokens.filter((e=>e.name&&e.name.toLowerCase().includes(c.toLowerCase())||e.symbol&&e.symbol.toLowerCase().includes(c.toLowerCase()))),x=m.filter((e=>!!(r.tokens&&e.mintAddress in r.tokens&&+r.tokens[e.mintAddress].amountAsFloat>0))),f=m.filter((e=>!x.includes(e)));function j(s){t(s),d(""),e()}return(0,o.jsxs)(a.Vm,{title:"Select a token",hide:e,show:s,children:[(0,o.jsxs)("label",{className:"input input-bordered bg-[#16171A] flex items-center gap-2",children:[(0,o.jsx)("input",{type:"text",className:"grow",placeholder:"Search",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&1===m.length&&(e.stopPropagation(),setTimeout((()=>{j(m[0].mintAddress)}),1))}}),!!c&&(0,o.jsx)("span",{className:"badge cursor-pointer",onClick:()=>d(""),children:"x"}),(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})})]}),(0,o.jsxs)("div",{className:"min-h-96",children:[0===f.length&&0===x.length&&(0,o.jsx)("span",{children:"No token found"}),x.length>0&&(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:(0,o.jsx)("span",{className:"text-[#F0F7FA]",children:"Your Tokens"})})})}),(0,o.jsx)("tbody",{children:x.map((e=>{const s=n.getStatsByMintAddress(e.mintAddress);return(0,o.jsxs)("tr",{className:"hover:cursor-pointer hover:bg-[#20295D]",onClick:()=>{j(e.mintAddress)},children:[(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"avatar",children:(0,o.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,o.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold",children:e.name}),(0,o.jsxs)("div",{className:"text-sm opacity-50",children:[(0,o.jsx)(u.xv,{mintAddress:e.mintAddress})," ",(0,a.qq)(e.mintAddress)]})]})]})}),(0,o.jsx)("td",{children:s&&s.volumeInUSD&&(0,o.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,p.az)(s.volumeInUSD)})})]},e.symbol)}))})]}),f.length>0&&(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:(0,o.jsx)("span",{className:"text-[#F0F7FA]",children:"All other Tokens"})})})}),(0,o.jsx)("tbody",{children:f.map((e=>{const s=n.getStatsByMintAddress(e.mintAddress);return(0,o.jsxs)("tr",{className:"hover:cursor-pointer hover:bg-[#20295D]",onClick:()=>{j(e.mintAddress)},children:[(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"avatar",children:(0,o.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,o.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold",children:e.name}),(0,o.jsxs)("div",{className:"text-sm opacity-50",children:[e.symbol," ",(0,a.qq)(e.mintAddress)]})]})]})}),(0,o.jsx)("td",{children:s&&s.volumeInUSD&&(0,o.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,p.az)(s.volumeInUSD)})})]},e.mintAddress)}))})]})]})]})}var g=t(7124);function v(e){const s=[{name:"Your odds",value:e.oddsAsFloat.toFixed(1),icon:(0,o.jsx)(g.Tw,{})},{name:"Your chance to win",value:e.probability,icon:(0,o.jsx)(g.R3,{})},{name:"You send",value:e.sendAmount+" "+e.sendSymbol,icon:(0,o.jsx)(g.qx,{})},{name:"Would be swapped to",value:e.swapOutputAmountAsFloat+" "+e.receiveSymbol,icon:(0,o.jsx)(g.vJ,{})},{name:"You can win",value:e.receiveAmountAsFloat+" "+e.receiveSymbol,icon:(0,o.jsx)(g.f,{})}],t=(0,n._)();return(0,o.jsxs)("div",{className:"flex flex-col gap-5 items-start -mt-6 z-10 w-full",children:[(0,o.jsx)("div",{onClick:()=>t.setSwapInfoVisible(!t.swapInfoVisible),className:"flex items-center ml-6 gap-2 custom-gradient p-px rounded-[40px] h-10 cursor-pointer select-none",children:(0,o.jsxs)("div",{className:"bg-[#232429] shadow-custom-inset flex items-center gap-2 rounded-[40px] px-4 h-full",children:[(0,o.jsx)("span",{className:"flex items-center justify-center "+(t.swapInfoVisible?"rotate-180":""),children:(0,o.jsx)(g.ZL,{})}),(0,o.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#607583]",children:"Info"})]})}),t.swapInfoVisible&&(0,o.jsx)("div",{className:"flex flex-col gap-2 w-full px-6",children:s&&s.map(((e,s)=>(0,o.jsxs)("div",{className:"flex items-center justify-between py-2 w-full",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon,(0,o.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:e.name})]}),(0,o.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:e.value})]},s)))})]})}var b=t(513),w=t(2358);function N({wallet:e,name:s,amountAsFloat:t,amountOnChange:l,token:n,onChangeToken:a,canWinAmountAsFloat:i=!1,waitingForNumbers:r=!1}){return(0,o.jsxs)("div",{className:"bg-[url('/assets/image/subtract.png')] w-full bg-no-repeat bg-cover h-[144px] flex flex-col items-start justify-between relative pt-[20px] pl-[24px]",children:[(0,o.jsx)("div",{className:"flex items-center absolute top-[4px] right-0 justify-center custom-gradient p-px rounded-full h-14",children:(0,o.jsx)("div",{role:"button",onClick:a,className:"bg-[#232429] hover:bg-[#20295D] shadow-custom-inset font-BelanosimaSemiBold flex items-center h-full rounded-full pl-4 pr-4 py-2 justify-center text-[#607583] font-semibold text-xs tracking-[0.02em]",children:(0,o.jsx)("div",{className:"",children:(0,o.jsxs)("div",{className:"active:scale-[0.99] transition-all duration-100 flex gap-3 items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"relative w-10 h-10",children:[(0,o.jsx)("div",{className:"absolute inset-0 w-full h-full bg-green-300 blur-2xl z-0"}),(0,o.jsx)("img",{src:n.logoURI,className:"w-full h-full rounded-full object-cover relative z-10",alt:"sell"})]}),(0,o.jsx)("div",{className:"text-xs text-sm font-BelanosimaSemiBold text-[#F0F7FA]",children:n.symbol})]}),(0,o.jsx)(g.ZL,{})]})})})}),(0,o.jsxs)("div",{className:"text-[14px] flex flex-row font-BelanosimaSemiBold text-[#F0F7FA] w-full",children:[s," ",e.publicKey&&(0,o.jsxs)("div",{className:"w-[14rem] text-right text-[13px] font-BelanosimaRegular",children:["You have"," ",(0,o.jsx)(u.xv,{mintAddress:n.mintAddress,clickCallback:i?void 0:e=>l({target:{value:e.toString()}})})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between pr-6 w-full",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 pb-2",children:[r&&(0,o.jsx)("span",{className:"h-[72px] text-[64px] text-[#F0F7FA] loading loading-dots loading-lg"}),!r&&(0,o.jsx)("input",{type:"text",value:i||t,placeholder:"Enter Amount",disabled:!!i,contentEditable:!(i||!l),className:"focus:outline-none bg-transparent w-64 text-[64px] placeholder:text-[32px] leading-[72px] font-BelanosimaRegular text-[#F0F7FA]",onChange:l})]}),!!i&&(0,o.jsxs)("div",{className:"flex flex-col items-end justify-end",children:[(0,o.jsx)("span",{className:"text-sm font-BelanosimaSemiBold text-[#F0F7FA] font-semibold",children:"Swap Return"}),(0,o.jsx)("span",{className:"text-[28px] leading-8 font-BelanosimaSemiBold font-semibold text-[#F0F7FA]",children:(0,o.jsxs)("span",{className:"text-[#4791FF] pr-0.5",children:[t," "]})})]})]})]})}function A({oddsAsFloat:e,oddsOnChange:s}){return(0,o.jsxs)("div",{className:"slider-container",children:[(0,o.jsxs)("div",{className:"flex flex-col absolute -top-[17px] px-1 w-full",children:[(0,o.jsxs)("div",{className:"slider-labels",children:[(0,o.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x1"}),(0,o.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x2"}),(0,o.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x3"}),(0,o.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x4"}),(0,o.jsx)("span",{className:"text-[#87ABCC] font-semibold font-BelanosimaSemiBold text-xs relative",children:"x5"})]}),(0,o.jsx)("div",{className:"flex justify-between w-full",children:Array(5).fill("").map(((e,s)=>(0,o.jsx)("span",{className:"point"},s)))})]}),(0,o.jsxs)("div",{className:"slider-wrapper",children:[(0,o.jsx)("input",{type:"range",min:"1",max:"5",step:"0.1",value:e,className:"slider w-full h-3 bg-no-repeat",onChange:s}),(0,o.jsx)("div",{style:{width:25*(e-1)+"%"},className:"absolute bg-no-repeat bg-full slider-bg rounded-[40px] -top-[5px] h-8 w-full  left-0 overflow-hidden pointer-events-none"})]})]})}function y({oddsAsFloat:e,oddsOnChange:s}){return(0,o.jsx)("div",{className:"flex flex-col relative z-10 w-full",children:(0,o.jsx)("div",{className:"flex items-center justify-center custom-gradient p-px rounded-[40px] relative w-full h-[144px]",children:(0,o.jsxs)("div",{className:"bg-[#232429] shadow-custom-inset font-BelanosimaSemiBold flex flex-col justify-between w-full h-full rounded-[40px] pl-[24px] pr-[24px] ",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,o.jsx)("span",{className:"text-sm font-semibold font-BelanosimaSemiBold text-[#F0F7FA]",children:"Odds"}),(0,o.jsx)("input",{value:e,onChange:s,className:"focus:outline-none bg-transparent w-24 font-normal text-right text-[64px] leading-[56px] tracking-[-0.02em] text-[#F0F7FA]"})]}),(0,o.jsx)("div",{className:"pb-2",children:(0,o.jsx)(A,{oddsAsFloat:e,oddsOnChange:s})})]})})})}function F(){return(0,o.jsx)("span",{className:"flex items-center justify-center cursor-pointer",children:(0,o.jsx)("img",{className:"w-8 h-8",alt:"share-icon",src:"/assets/image/share-icon.png"})})}function S({startPosition:e,endPosition:s,swap:t}){const l=(0,b.c)(),a=((0,i.NA)(),(0,n._)());return(0,o.jsx)("div",{className:"z-[50] fixed inset-0",children:(0,o.jsxs)("div",{className:"z-[50] rounded-full flex items-center justify-center absolute animate-circle-jump",style:{top:`${e.top}px`,left:`${e.left}px`,"--end-x":`${s.x}px`,"--end-y":`${s.y}px`},children:[(0,o.jsx)(r,{swap:t}),(0,o.jsx)("div",{className:"hover:cursor-pointer pl-5",onClick:function(){a.setChatVisible(!0),l.onSendMessage({sender:t.user,payload:`swap: ${JSON.stringify(t)}`,created:(0,w.O5)()})},children:(0,o.jsx)(F,{})})]})})}function B({sendMint:e,receiveMint:s}){(0,a.RU)();const{connection:t}=(0,m.w)(),r=(0,x.v)(),c=(0,f.Zp)(),d=((0,a.hx)(),(0,i.NA)()),u=(0,i.Hk)(),h=d.satoshiToFloat(e,1e8).toString(),[g,b]=(0,l.useState)(2),[w,A]=(0,l.useState)(100),[F,B]=(0,l.useState)(h),[k,C]=(0,l.useState)(""),[M,T]=(0,l.useState)(""),[z,$]=(0,l.useState)(e),[q,D]=(0,l.useState)(s),[I,O]=(0,l.useState)(!1),R=(0,l.useRef)(null),[P,U]=(0,l.useState)("idle"),L=(0,l.useRef)({top:0,left:0}),E=(0,n._)(),V=!d.isHouseToken(q),Y=(0,l.useMemo)((()=>{if(H()){if(V){const e=F?Number.parseFloat(F):null,s=W(e),t=s&&e?e-s:null;return null!=s&&null!=t?(t+s*g).toString():null}return F}return null}),[g,w,F,z]),Z=(0,l.useMemo)((()=>H()?V?(+M/g).toPrecision(5):M:null),[M]);function G(e){e===q&&D(z),$(e),c(e===q?`/swap/${q}/${z}`:`/swap/${e}/${q}`)}function W(e){return e?e*w/100:null}function H(){return(0,p.uA)(F)&&g&&z&&q}(0,l.useEffect)((()=>{H()&&O(!0)}),[g,w,F,z,q]),(0,a.sv)((()=>{H()&&async function(){const e=z,s=q;if(!Y||!e||!s)return;const t=+Y*Math.pow(10,d.getTokenByMintAddress(e).decimals),l=await(await fetch(`https://quote-api.jup.ag/v6/quote?inputMint=${e}&outputMint=${s}&amount=${t}&slippageBps=50`)).json(),n=d.calculatePrice(l),a=+Y*n;if(T(a.toPrecision(5)),V)C(a.toPrecision(5));else{const e=W(a),s=e&&a?a-e:null;if(null==e||null==s)throw Error("Something went wrong");C((s+e*g).toPrecision(5))}O(!1)}()}),[g,w,F,z,q]);const[_,K]=(0,l.useState)(!1),[J,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j,{show:_,hideModal:()=>K(!1),onSelectCallback:e=>G(e)}),(0,o.jsx)(j,{show:J,hideModal:()=>Q(!1),onSelectCallback:e=>{return z===(s=e)&&$(q),D(s),void c(z===s?`/swap/${q}/${z}`:`/swap/${z}/${s}`);var s}}),(0,o.jsx)("div",{className:" p-px flex flex-col flex-1  rounded-[40px] min-w-[514px] w-[514px] max-w-[514px]",children:(0,o.jsxs)("div",{className:"flex flex-col gap-1 w-full rounded-[40px] p-1 relative z-[12] bg-[url('/assets/image/second.png')] bg-cover bg-no-repeat bg-center  bg-[#1B1C1F]",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-1 relative w-full",children:[(0,o.jsx)(N,{wallet:r,name:"Send Amount",amountAsFloat:F,amountOnChange:e=>B(e.target.value),token:d.getTokenByMintAddress(z),onChangeToken:()=>K(!0)}),(0,o.jsx)("img",{alt:"swap-icon",src:"/assets/image/swap-icon.png",className:"w-10 h-10 object-cover flex items-center justify-center z-10 absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2"}),(0,o.jsx)("div",{onClick:()=>G(q),className:"cursor-pointer rounded-full w-10 h-10 object-cover flex items-center justify-center z-10 absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 hover:bg-[#20295D] hover:bg-opacity-50"}),(0,o.jsx)(N,{wallet:r,name:"You can win",amountAsFloat:Z,amountOnChange:e=>C(e.target.value),token:d.getTokenByMintAddress(q),onChangeToken:()=>Q(!0),canWinAmountAsFloat:k,waitingForNumbers:I})]}),(0,o.jsx)(y,{oddsAsFloat:g,oddsOnChange:e=>b(Number.parseFloat(e.target.value))}),(0,o.jsx)(v,{oddsAsFloat:g,probability:(1/g*100*.975).toFixed(1),sendAmount:F,sendSymbol:d.getTokenByMintAddress(z).symbol,receiveSymbol:d.getTokenByMintAddress(q).symbol,gambleBeforeSwap:V,swapInputAmountAsFloat:Y,receiveAmountAsFloat:k,swapOutputAmountAsFloat:Z}),!X&&(0,o.jsx)("div",{onClick:()=>{if(!R.current)return;const e=R.current.getBoundingClientRect();L.current={top:e.top,left:e.left},ee(!0),async function(){const e=z,s=q,t=+F*Math.pow(10,d.getTokenByMintAddress(e).decimals);return await u.mutateAsync({inputMint:e,outputMint:s,amountAsInteger:t,oddsAsFloat:g})}().then((e=>{ee(!1),e.userHasWon||(E.setTickerVisible(!1),U("animating"),setTimeout((()=>{U("completed"),setTimeout((()=>{U("idle")}),3e4)}),2300))}))},className:"flex items-center justify-center px-6 transition hover:duration-500 hover:scale-110 active:duration-100 active:scale-90 my-6 w-full",children:(0,o.jsx)("button",{ref:R,disabled:!H()||I,className:"bg-[url('/assets/image/swap-btn.png')] disabled:bg-none hover:bg-[#20295D55] transition duration-500 hover:bg-blend-overlay bg-no-repeat bg-center bg-cover z-10 w-full p-px h-16 flex items-center rounded-[40px] relative justify-center",children:(0,o.jsx)("span",{className:" flex items-center justify-center relative z-10 rounded-[40px] shadow-blur-inset text-base font-semibold font-BelanosimaSemiBold text-[#F0F7FA] w-full h-full",children:"Swap"})})}),X&&(0,o.jsx)("div",{className:"flex items-center justify-center px-6 my-6 w-full",children:(0,o.jsx)("div",{className:"z-10 w-full p-px h-16 flex items-center rounded-[40px] relative justify-center",children:(0,o.jsx)("span",{className:"animate-pulse flex text-gray-400 items-center justify-center relative z-10 rounded-[40px] shadow-blur-inset text-base font-semibold font-BelanosimaSemiBold w-full h-full",children:"Swapping in progress"})})}),("animating"===P||"completed"===P)&&(0,o.jsx)(S,{startPosition:L.current,endPosition:{x:-20,y:100},swap:{user:{name:r.publicKey.toString()},amountAsFloat:k,mintAddress:q,result:"won",pair:d.getTokenByMintAddress(z).symbol+" / "+d.getTokenByMintAddress(q).symbol}})]})})]})}function k(){const e=(0,f.g)(),s=(0,l.useMemo)((()=>e.sendMint?e.sendMint:"So11111111111111111111111111111111111111112"),[e]),t=(0,l.useMemo)((()=>e.receiveMint?e.receiveMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),[e]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,o.jsx)("span",{className:"text-[#F0F7FA] font-BelanosimaRegular text-center font-normal text-[88px] leading-[96px] tracking-[-0.02em]",children:"Lucky\xa0Swaps"}),(0,o.jsx)("span",{className:"font-semibold text-base text-[#5F7385] text-center font-BelanosimaSemiBold",children:"Challenge your luck now"})]}),(0,o.jsxs)("div",{className:"flex flex-col px-5 md:px-12 my-14 w-full",children:[(0,o.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8 h-full w-full max-w-[960px] mx-auto items-center xl:items-start justify-center",children:[(0,o.jsx)(d.x,{}),(0,o.jsx)(B,{sendMint:s,receiveMint:t})]}),(0,o.jsx)(c,{})]})]})}}}]);