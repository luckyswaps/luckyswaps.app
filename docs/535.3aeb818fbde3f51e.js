"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[535],{535:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var n=t(8036),l=t(3696),a=t(2540);function i(){return(0,a.jsxs)("div",{className:"w-full text-center",children:[(0,a.jsxs)("span",{children:["Last Lucky Swaps Ticker: "," "]}),[{userName:"abc",pair:"SOL / USDC",text:"won 2 SOL"},{userName:"def",pair:"SOL / USDC",text:"won 3 SOL"},{userName:"def",pair:"SOL / USDC",text:"lost 5 SOL"}].map((e=>(0,a.jsxs)("span",{children:[e.userName," ",e.text,"  -  "]},JSON.stringify(e))))]})}var r=t(3530),c=t(8267),d=t(9682),o=t(9758),u=t(2030),x=t(7435),m=t(6756),h=t(3694);function p({hideModal:e,show:s,onSelectCallback:t}){const i=(0,m.NA)(),r=(0,h.F7)(),[c,d]=(0,l.useState)(""),x=i.allTokens.filter((e=>e.name.toLowerCase().includes(c.toLowerCase())||e.symbol.toLowerCase().includes(c.toLowerCase()))),p=x.filter((e=>!!(r.tokens&&e.mintAddress in r.tokens&&+r.tokens[e.mintAddress].amountAsFloat>0))),j=x.filter((e=>!p.includes(e)));function b(s){t(s),d(""),e()}return(0,a.jsxs)(n.Vm,{title:"Select a token",hide:e,show:s,children:[(0,a.jsxs)("label",{className:"input input-bordered flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",className:"grow",placeholder:"Search",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&1===x.length&&(e.stopPropagation(),setTimeout((()=>{b(x[0].mintAddress)}),1))}}),!!c&&(0,a.jsx)("span",{className:"badge cursor-pointer",onClick:()=>d(""),children:"x"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"})})]}),(0,a.jsxs)("div",{className:"min-h-96",children:[0===j.length&&0===p.length&&(0,a.jsx)("span",{children:"No token found"}),p.length>0&&(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Your Tokens"})})}),(0,a.jsx)("tbody",{children:p.map((e=>{const s=i.getStatsByMintAddress(e.mintAddress);return(0,a.jsxs)("tr",{className:"hover cursor-pointer",onClick:()=>{b(e.mintAddress)},children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"avatar",children:(0,a.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,a.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold",children:e.name}),(0,a.jsx)("div",{className:"text-sm opacity-50",children:(0,a.jsx)(o.xv,{mintAddress:e.mintAddress})})]})]})}),(0,a.jsx)("td",{children:s&&s.volumeInUSD&&(0,a.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,u.az)(s.volumeInUSD)})})]},e.symbol)}))})]}),j.length>0&&(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"Tokens"})})}),(0,a.jsx)("tbody",{children:j.map((e=>{const s=i.getStatsByMintAddress(e.mintAddress);return(0,a.jsxs)("tr",{className:"hover cursor-pointer",onClick:()=>{b(e.mintAddress)},children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"avatar",children:(0,a.jsx)("div",{className:"mask mask-squircle h-12 w-12",children:(0,a.jsx)("img",{src:e.logoURI,alt:`${e.symbol} logo`})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold",children:e.name}),(0,a.jsx)("div",{className:"text-sm opacity-50",children:e.symbol})]})]})}),(0,a.jsx)("td",{children:s&&s.volumeInUSD&&(0,a.jsx)("span",{className:"badge badge-ghost badge-sm",children:(0,u.az)(s.volumeInUSD)})})]},e.symbol)}))})]})]})]})}var j=t(9166);function b(){const e=(0,j._)();return(0,a.jsx)("button",{className:"btn",onClick:()=>e.setSwapInfoVisible(!e.swapInfoVisible),children:"v Info"})}function g(e){return(0,j._)().swapInfoVisible?(0,a.jsx)("div",{className:"card rounded-box grid px-5 place-items-center",children:(0,a.jsx)("div",{className:"overflow-x-auto text-secondary-content",children:(0,a.jsx)("table",{className:"table",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Your odds"}),(0,a.jsx)("td",{children:e.oddsAsFloat})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Your chance to win"}),(0,a.jsxs)("td",{children:[e.probability,"%"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"You send"}),(0,a.jsxs)("td",{children:[e.sendAmount," ",e.sendSymbol]})]}),e.gambleBeforeSwap?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"... if you win that becomes"}),(0,a.jsxs)("td",{children:[e.swapInputAmountAsFloat," ",e.sendSymbol]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:".. and will be swapped to"}),(0,a.jsxs)("td",{children:[e.receiveAmountAsFloat," ",e.receiveSymbol]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"... that will be swapped to"}),(0,a.jsxs)("td",{children:[e.swapOutputAmountAsFloat," ",e.receiveSymbol]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"... and if you win that becomes"}),(0,a.jsxs)("td",{children:[e.receiveAmountAsFloat," ",e.receiveSymbol]})]})]})]})})})}):null}function v({sendMint:e,receiveMint:s}){const t=(0,n.RU)(),{connection:i}=(0,r.w)(),h=(0,c.v)(),j=(0,x.Zp)(),v=(0,n.hx)(),w=(0,m.NA)(),y=(0,m.Hk)(),N=w.satoshiToFloat(e,1e8).toString(),[f,S]=(0,l.useState)(2),[A,k]=(0,l.useState)(100),[M,C]=(0,l.useState)(N),[F,T]=(0,l.useState)(null),[I,L]=(0,l.useState)(null),[B,$]=(0,l.useState)(e),[O,U]=(0,l.useState)(s),D=!w.isHouseToken(O),q=(0,l.useMemo)((()=>{if(Y()){if(D){const e=P(),s=R(e),t=s&&e?e-s:null;return null!=s&&null!=t?(t+s*f).toString():null}return M}return null}),[f,A,M,B]);function P(){return M?Number.parseFloat(M):null}function R(e){return e?e*A/100:null}function Y(){return(0,u.uA)(M)&&f&&B&&O}(0,l.useEffect)((()=>{Y()&&async function(){const e=B,s=O;if(!q||!e||!s)return;const t=+q*Math.pow(10,w.getTokenByMintAddress(e).decimals),n=await(await fetch(`https://quote-api.jup.ag/v6/quote?inputMint=${e}&outputMint=${s}&amount=${t}&slippageBps=50`)).json(),l=w.calculatePrice(n),a=+q*l;if(L(a.toPrecision(5)),D)T(a.toPrecision(5));else{const e=R(a),s=e&&a?a-e:null;if(null==e||null==s)throw Error("Something went wrong");T((s+e*f).toPrecision(5))}}()}),[f,A,M,B,O]);const[E,K]=(0,l.useState)(!1),[V,Z]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)(p,{show:E,hideModal:()=>K(!1),onSelectCallback:e=>{return(s=e)===O&&U(B),$(s),void j(s===O?`/swap/${O}/${B}`:`/swap/${s}/${O}`);var s}}),(0,a.jsx)(p,{show:V,hideModal:()=>Z(!1),onSelectCallback:e=>{return B===(s=e)&&$(O),U(s),void j(B===s?`/swap/${O}/${B}`:`/swap/${B}/${s}`);var s}}),(0,a.jsxs)("div",{className:"card bg-secondary rounded-box grid h-24 p-4 place-items-center",children:[h.publicKey&&(0,a.jsxs)("p",{className:"text-sm text-right w-full text-secondary-content",children:["You have"," ",(0,a.jsx)(o.xv,{mintAddress:B,clickCallback:e=>C(e.toString())})]}),(0,a.jsxs)("div",{className:"join",children:[(0,a.jsxs)("label",{className:"input input-primary input-bordered flex items-center gap-2 max-w-80",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Send\xa0Amount"}),(0,a.jsx)("input",{type:"text",className:"grow",placeholder:"0.0",value:M,onChange:e=>{C(e.target.value)}})]}),(0,a.jsx)("button",{className:"select select-primary w-full max-w-xs",value:B||"Token",onClick:()=>{K(!0)},children:(0,a.jsx)("span",{className:"leading-10",children:w.getTokenByMintAddress(B).symbol})})]})]}),(0,a.jsx)("div",{className:"divider",children:"\u21a1"}),(0,a.jsxs)("div",{className:"card bg-secondary rounded-box grid h-24 p-4 place-items-center",children:[h.publicKey&&(0,a.jsxs)("p",{className:"text-sm text-right w-full text-secondary-content",children:["You have"," ",(0,a.jsx)(o.xv,{mintAddress:O})]}),(0,a.jsxs)("div",{className:"join",children:[(0,a.jsxs)("label",{className:"input input-primary input-bordered flex items-center gap-2 max-w-80",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Receive\xa0Amount"}),(0,a.jsx)("input",{disabled:!0,type:"text",className:"grow",placeholder:"0.0",value:F||"",onChange:e=>{T(e.target.value)}})]}),(0,a.jsx)("button",{className:"select select-primary w-full max-w-xs",value:O||"Token",onClick:()=>{Z(!0)},children:(0,a.jsx)("span",{className:"leading-10",children:w.getTokenByMintAddress(O).symbol})})]})]}),(0,a.jsx)("div",{className:"divider",children:"\u21ba"}),(0,a.jsxs)("div",{className:"card bg-secondary rounded-box grid h-24 p-4 place-items-center",children:[(0,a.jsx)("span",{className:"text-secondary-content",children:"Odds"}),(0,a.jsxs)("div",{className:"join",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("input",{type:"range",min:"1",max:"5",value:f,className:"range",step:"0.1",onChange:e=>{S(Number.parseFloat(e.target.value))}}),(0,a.jsxs)("div",{className:"flex justify-between px-2 text-xs text-secondary-content",children:[(0,a.jsx)("span",{children:"|1x"}),(0,a.jsx)("span",{children:"|2x"}),(0,a.jsx)("span",{children:"|3x"}),(0,a.jsx)("span",{children:"|4x"}),(0,a.jsx)("span",{children:"|5x"})]})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)("input",{type:"text",placeholder:"Odds",className:"input input-bordered w-full max-w-xs",value:f,onChange:e=>{S(Number.parseFloat(e.target.value))}})})]})]}),(0,a.jsxs)("div",{className:"divider",children:["\ud83c\udf40 ",b()]}),(0,a.jsx)(g,{oddsAsFloat:f,probability:(1/f*100*.975).toFixed(1),sendAmount:P(),sendSymbol:w.getTokenByMintAddress(B).symbol,receiveSymbol:w.getTokenByMintAddress(O).symbol,gambleBeforeSwap:D,swapInputAmountAsFloat:q,receiveAmountAsFloat:F,swapOutputAmountAsFloat:I}),(0,a.jsx)("div",{className:"card rounded-box grid place-items-center",children:(0,a.jsxs)("div",{className:"join",children:[!h.publicKey&&(0,a.jsx)(d.U,{}),h.publicKey&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"btn btn-primary btn-wide mr-4",disabled:y.isPending,onClick:async function(){const e=B,s=O,t=+M*Math.pow(10,w.getTokenByMintAddress(e).decimals);y.mutateAsync({inputMint:e,outputMint:s,amountAsInteger:t,oddsAsFloat:f})},children:"LuckySwap"}),(0,a.jsx)("button",{className:"btn btn-primary btn-wide",onClick:async function(){try{const e=B,s=O,t=+M*Math.pow(10,w.getTokenByMintAddress(e).decimals),n=await(0,u.TI)(h,i,e,s,t);v(n.signature)}catch(e){t(e),console.error(e),e.logs&&console.error("transaction logs",null==e?void 0:e.logs)}},children:"JupiterSwap"})]})]})}),(0,a.jsx)("div",{className:"divider"})]})}function w(){const e=(0,x.g)(),s=(0,l.useMemo)((()=>e.sendMint?e.sendMint:"So11111111111111111111111111111111111111112"),[e]),t=(0,l.useMemo)((()=>e.receiveMint?e.receiveMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.sR,{title:"Lucky Swaps",subtitle:"Challenge your luck now"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 my-4 justify-items-center w-full",children:(0,a.jsx)(v,{sendMint:s,receiveMint:t})}),(0,a.jsx)(i,{})]})}}}]);